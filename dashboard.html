<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HR Dashboard</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="./css/main.css">

</head>
<body>
  <!-- navbar starts here  -->
  <nav class="navbar bg-body-tertiary fixed-top" style="background: linear-gradient(135deg, #405766, #ffffff, #5F7C8A, #ffffff);">
    <div class="container-fluid">

        <img src="./img/icon.png" style="border: 2px solid #405766;" height="50px" alt="icon">
        <a class="navbar-brand" href="dashboard.html"> Welcome to the Dashboard</a>
        
        <!-- Toggler button for offcanvas menu -->
        <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Offcanvas menu content -->
        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title">ModernTech Solutions</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
            </div>
            <div class="offcanvas-body">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link active" href="dashboard.html">Home</a></li>
          <!-- Employee Data Dropdown -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="employeeDropdown" data-bs-toggle="dropdown">
             Employee Data</a>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="employee.html">Employee Information</a></li>
                <li><a class="dropdown-item" href="attendtimeoff.html">Attendance</a></li>
                <li><a class="dropdown-item" href="payrollcalc.html">Payroll</a></li>
                <li><a class="dropdown-item" href="Leave.html">Leave</a></li>
             </ul>
                    </li>
                                    
             <!-- Performance Dropdown -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="performanceDropdown" data-bs-toggle="dropdown"> Performance
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="performance-form.html">Performance Review Form</a></li>
                            <li><a class="dropdown-item" href="performance_records.html">Performance Records</a></li>
                        </ul>
                         </li>
                         <li class="nav-item"><a class="nav-link" href="index.html" style="color:red;">Log Out</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
<!-- Navbar ends here -->


   <!-- Video Section -->
<section class="background-video">
  <!-- Background video looping with no sound -->
  <video autoplay muted loop playsinline class="background-clip">
    <source src="./video/background-clip.mp4" type="video/mp4">
  </video>
  <!-- Content overlay on the video -->
  <div class="content">
    <h2>Welcome back</h2>
    <h3>Mia Thompson</h3>
  </div>
</section>
  
  <main class="parent">
    <!-- Employee Dashboard Cards -->
    <!-- <div class="card-container"> -->
      <!-- Employee Card -->
      <!-- <section class="employee-card-section">
        <div class="card-body">
          <div class="inside-employee-card">
            <div class="header">
              <h5>Employee</h5>
            </div>
            <div class="card-body">
              <div class="employee-info">
                <p><strong>Position:</strong> Software Engineer</p>
                <p><strong>Department:</strong> Development</p>
              </div>
            </div>
            <div class="card-footer">
              <a href="#" class="card-link">View Profile</a>
            </div>
          </div>
        </div>
      </section> -->
      
      <!-- Payroll Card -->
      <!-- <div class="card" onclick="window.location.href='../attendtimeoff.html'">
        <section class="payroll-card-section">
          <div class="card-body">
            <div class="inside-payroll-card">
              <div class="header">
                <h5>Payroll Info</h5>
                <a href="./employee.html" class="see-all">See All</a>
              </div>
              <p><strong>Days Worked:</strong> 22</p>
              <p><strong>Leave Deductions:</strong> 8 days</p>
              <p><strong>Final Salary:</strong> $69,500</p>
            </div>
          </div>
          <div class="card-footer">
            <a href="#" class="card-link">View Payroll</a>
          </div>
        </section>
      </div> -->
    
      <!-- Attendance Card Section -->
  <section class="attendance-card-section">
        <div class="card-body">
          <div class="inside-attendance-card">
            <div class="header">
              <h5>Work Attendance</h5>
              <a href="./attendtimeoff.html" class="see-all">See All</a>
            </div>
            <p class="card-text">There are 15 employees present and 5 absent today.</p>
            <div id="employee-section" class="employee-section">
              <div class="employee-item">
                <img src="./img/photo-2.jpg" alt="Sipho Zulu" class="avatar">
                <div class="employee-info">
                  <p><strong>Sipho Zulu</strong> <span>ðŸ’¼</span></p>
                  <p>UI/UX Designer</p>
                </div>
                <div class="employee-badge">Absent</div>
              </div>
              <div class="employee-item">
                <img src="./img/photo-4.jpg" alt="Sibongile Nkosi" class="avatar">
                <div class="employee-info">
                  <p><strong>Sibongile Nkosi</strong> <span>ðŸŒŸ</span></p>
                  <p>Software Engineer</p>
                </div>
                <div class="employee-badge">Present</div>
              </div>
              <div class="employee-item">
                <img src="./img/photo-3.jpg" alt="Farai Gumbo" class="avatar">
                <div class="employee-info">
                  <p><strong>Farai Gumbo</strong> <span>ðŸŒŸ</span></p>
                  <p>Content Strategist</p>
                </div>
                <div class="employee-badge">Present</div>
              </div>
            </div>
          </div>
        </div>
      </div>
</section>
  
    <!-- Time Off Section -->
<section>
      <div class="card-body">
        <div class="inside-timeoff-card">
          <div class="header">
            <h5 class="card-title">Time Off</h5>
            <a href="./attendtimeoff.html" class="see-all">See All</a>
          </div>
          <!-- Circular Progress Bar -->
          <div class="d-flex justify-content-between align-items-center">
            <div class="progress-circle mt-3">
              <svg width="100" height="100">
                <circle class="progress-background" cx="50" cy="50" r="45"></circle>
                <circle class="progress-value" cx="50" cy="50" r="45" stroke="#6A5ACD" stroke-dasharray="283" stroke-dashoffset="113"></circle>
              </svg>
              <div class="text">15 <br><span style="font-size: 12px;">OUT OF 20</span></div>
            </div>
          </div>
          <!-- Time Off Requests -->
          <div class="time-off-item">
            <div><span>Aug 11, 2024</span> <small>[Sick]</small></div>
            <span class="badge bg-warning text-dark">Pending</span>
          </div>
          <div class="time-off-item">
            <div><span>Dec 17, 2024</span> <small>[Annual]</small></div>
            <span class="badge bg-success">Confirmed</span>
          </div>
          <div class="time-off-item">
            <div><span>Nov 20, 2024</span> <small>[Casual]</small></div>
            <span class="badge bg-danger">Rejected</span>
          </div>
        </div>
      </div>
</section>
  
    <!-- Employee Tracker Section -->
<section>
      <div class="card-body">
        <div class="inside-employee-card">
          <div class="header">
            <h5>Attendance Tracker</h5>
            <a href="attendtimeoff.html" class="see-all">See All</a>
          </div>
        
          <div class="employee-section">
            <h6>Absent</h6>
            <div class="employee-item">
              <img src="./img/photo-2.jpg" alt="Thabo Molefe" class="avatar">
              <div class="employee-info">
                <p><strong>Thabo Molefe</strong> <span>ðŸ’¼</span></p>
                <p>Quality Analyst</p>
              </div>
              <div class="employee-badge">Absent</div>
            </div>
          </div>
        
          <div class="employee-section">
            <h6>Away</h6>
            <div class="employee-item">
              <img src="./img/photo-3.jpg" alt="Keshav Naidoo" class="avatar">
              <div class="employee-info">
                <p><strong>Keshav Naidoo</strong> <span>ðŸŒŸ</span></p>
                <p>Sales Representative</p>
              </div>
              <div class="employee-time">25m</div>
            </div>
        
            <div class="employee-item">
              <img src="./img/photo-4.jpg" alt="Karabo Dlamini" class="avatar">
              <div class="employee-info">
                <p><strong>Karabo Dlamini</strong> <span>ðŸ“ˆ</span></p>
                <p>Accountant</p>
              </div>
              <div class="employee-time">12m</div>
            </div>
        
            <div class="employee-item">
              <img src="./img/photo-1.jpg" alt="Zanele Khumalo" class="avatar">
              <div class="employee-info">
                <p><strong>Zanele Khumalo</strong> <span>ðŸ“±</span></p>
                <p>Marketing Specialist</p>
              </div>
              <div class="employee-time">8m</div>
            </div>
          </div>
        </div>
      </div>
  </section>
</main>
  <!-- Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js">

document.addEventListener("DOMContentLoaded", function () {
    fetch("/employees")
        .then(response => response.json())
        .then(data => {
            let employeeSection = document.getElementById("employee-section");
            employeeSection.innerHTML = data.map(emp => `
                <p><strong>${emp.name}</strong> - ${emp.position} (${emp.department})</p>
            `).join("");
        });

    fetch("/payroll")
        .then(response => response.json())
        .then(data => {
            let payrollSection = document.getElementById("payroll-section");
            payrollSection.innerHTML = data.map(payroll => `
                <p>Days Worked: ${payroll.days_worked}</p>
                <p>Leave Deductions: ${payroll.leave_deductions}</p>
                <p>Final Salary: $${payroll.final_salary}</p>
            `).join("");
        });

    fetch("/attendance")
        .then(response => response.json())
        .then(data => {
            let attendanceSection = document.getElementById("attendance-section");
            attendanceSection.innerHTML = `
                <p>Present: ${data[0].total_present}</p>
                <p>Absent: ${data[0].total_absent}</p>
            `;
        });

    fetch("/timeoff")
        .then(response => response.json())
        .then(data => {
            let timeOffSection = document.getElementById("timeoff-section");
            timeOffSection.innerHTML = data.map(timeoff => `
                <p>${timeoff.date} - ${timeoff.type} (${timeoff.status})</p>
            `).join("");
        });
});

</script>

</body>
</html>